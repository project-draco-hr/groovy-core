{
  if (clazz != null)   return clazz;
  if (redirect != null)   return redirect.getTypeClass();
  ClassNode component=redirect().componentType;
  if (component != null && component.isResolved()) {
    ClassNode cn=component.makeArray();
    setRedirect(cn);
    return redirect().getTypeClass();
  }
  throw new GroovyBugError("ClassNode#getTypeClass for " + getName() + " is called before the type class is set ");
}
