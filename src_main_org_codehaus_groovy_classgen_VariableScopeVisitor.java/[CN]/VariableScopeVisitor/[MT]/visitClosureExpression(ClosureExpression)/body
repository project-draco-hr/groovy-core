{
  pushState();
  inClosure=true;
  currentScope.setDynamicResolving(true);
  expression.setVariableScope(currentScope);
  if (expression.isParameterSpecified()) {
    Parameter[] parameters=expression.getParameters();
    for (int i=0; i < parameters.length; i++) {
      parameters[i].setInStaticContext(currentScope.isInStaticContext());
      if (parameters[i].hasInitialExpression()) {
        parameters[i].getInitialExpression().visit(this);
      }
      declare(parameters[i],expression);
    }
  }
 else   if (expression.getParameters() != null) {
    Parameter var=new Parameter(ClassHelper.OBJECT_TYPE,"it");
    var.setInStaticContext(currentScope.isInStaticContext());
    currentScope.putDeclaredVariable(var);
  }
  super.visitClosureExpression(expression);
  popState();
}
