{
  validate();
  try {
    compile();
  }
 catch (  Exception e) {
    StringWriter writer=new StringWriter();
    new ErrorReporter(e,false).write(new PrintWriter(writer));
    String message=writer.toString();
    if (failOnError) {
      throw new BuildException(message,e,getLocation());
    }
 else {
      log.error(message);
    }
  }
}
