{
  File[] files=dir.listFiles();
  List traverseList=new ArrayList();
  for (int i=0; i < files.length; i++) {
    File file=files[i];
    if (file.isDirectory()) {
      traverseList.add(file);
    }
 else {
      String name=file.getName();
      if (name.endsWith("Test.groovy") || name.endsWith("Bug.groovy")) {
        Class clazz=parseClass(file);
        if (TestCase.class.isAssignableFrom(clazz)) {
          TestSuite suite=new TestSuite(clazz);
          suite.run(result);
        }
      }
    }
  }
  for (Iterator iter=traverseList.iterator(); iter.hasNext(); ) {
    executeTests((File)iter.next(),result);
  }
}
