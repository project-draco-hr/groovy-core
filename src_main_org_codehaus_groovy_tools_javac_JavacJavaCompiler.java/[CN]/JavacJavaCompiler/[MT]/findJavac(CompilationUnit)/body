{
  Class javac=null;
  String MAIN="com.sun.tools.javac.Main";
  try {
    javac=Class.forName(MAIN);
  }
 catch (  ClassNotFoundException e) {
    ClassLoader cl=this.getClass().getClassLoader();
    try {
      javac=cl.loadClass(MAIN);
    }
 catch (    ClassNotFoundException e1) {
      try {
        javac=ClassLoader.getSystemClassLoader().loadClass(MAIN);
      }
 catch (      ClassNotFoundException e2) {
        try {
          javac=cu.getClassLoader().getParent().loadClass(MAIN);
        }
 catch (        ClassNotFoundException e3) {
          String javaHome=System.getProperty("java.home");
          if (javaHome.toLowerCase(Locale.US).endsWith("jre")) {
            javaHome=javaHome.substring(0,javaHome.length() - 4);
          }
          File toolsJar=new File((javaHome + "/lib/tools.jar"));
          if (toolsJar.exists()) {
            GroovyClassLoader loader=cu.getClassLoader();
            loader.addClasspath(toolsJar.getAbsolutePath());
            javac=loader.loadClass(MAIN);
          }
        }
      }
    }
  }
  return javac;
}
