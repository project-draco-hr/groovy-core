{
  if (left == right)   return true;
  if (left == null || right == null)   return false;
  if (left instanceof Comparable) {
    return compareTo(left,right) == 0;
  }
  Class leftClass=left.getClass();
  Class rightClass=right.getClass();
  if (leftClass.isArray() && rightClass.isArray()) {
    return compareArrayEqual(left,right);
  }
  if (leftClass.isArray() && leftClass.getComponentType().isPrimitive()) {
    left=primitiveArrayToList(left);
  }
  if (rightClass.isArray() && rightClass.getComponentType().isPrimitive()) {
    right=primitiveArrayToList(right);
  }
  if (left instanceof Object[] && right instanceof List) {
    return DefaultGroovyMethods.equals((Object[])left,(List)right);
  }
  if (left instanceof List && right instanceof Object[]) {
    return DefaultGroovyMethods.equals((List)left,(Object[])right);
  }
  if (left instanceof List && right instanceof List) {
    return DefaultGroovyMethods.equals((List)left,(List)right);
  }
  return ((Boolean)InvokerHelper.invokeMethod(left,"equals",right)).booleanValue();
}
