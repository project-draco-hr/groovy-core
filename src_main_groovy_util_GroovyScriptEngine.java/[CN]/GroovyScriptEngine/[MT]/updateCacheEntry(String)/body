{
  ScriptCacheEntry entry;
  scriptName=scriptName.intern();
synchronized (scriptName) {
    URLConnection scriptConn=rc.getResourceConnection(scriptName);
    long lastModified=scriptConn.getLastModified();
    entry=scriptCache.get(scriptName);
    if (entry == null || entry.lastModified < lastModified || dependencyOutOfDate(entry)) {
      ScriptCacheEntry cacheEntry=new ScriptCacheEntry();
      currentCacheEntryHolder.set(cacheEntry);
      cacheEntry.scriptClass=parseScript(scriptName,scriptConn);
      cacheEntry.lastModified=lastModified;
      scriptCache.put(scriptName,cacheEntry);
      entry=cacheEntry;
      cacheEntry=null;
    }
 else {
      forceClose(scriptConn);
    }
  }
  return entry;
}
