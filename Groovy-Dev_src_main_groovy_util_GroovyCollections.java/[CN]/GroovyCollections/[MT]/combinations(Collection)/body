{
  List combinations=new ArrayList();
  for (Iterator outer=lists.iterator(); outer.hasNext(); ) {
    Object candidateList=outer.next();
    List list=(List)DefaultTypeTransformation.castToType(candidateList,List.class);
    if (combinations.isEmpty()) {
      for (int i=0; i < list.size(); i++) {
        List l=new ArrayList();
        l.add(list.get(i));
        combinations.add(l);
      }
    }
 else {
      List savedCombinations=new ArrayList(combinations);
      List newCombinations=new ArrayList();
      for (Iterator inner=list.iterator(); inner.hasNext(); ) {
        Object value=inner.next();
        for (Iterator combos=savedCombinations.iterator(); combos.hasNext(); ) {
          List oldlist=new ArrayList((List)combos.next());
          oldlist.add(value);
          newCombinations.add(oldlist);
        }
      }
      combinations=newCombinations;
    }
  }
  return combinations;
}
