{
  GroovyShell groovy=new GroovyShell(conf);
  Script s;
  if (isScriptFile) {
    if (isScriptUrl(script)) {
      s=groovy.parse(getText(script),script.substring(script.lastIndexOf("/") + 1));
    }
 else {
      s=groovy.parse(huntForTheScriptFile(script));
    }
  }
 else {
    s=groovy.parse(script,"main");
  }
  if (args.isEmpty()) {
    BufferedReader reader=new BufferedReader(new InputStreamReader(System.in));
    PrintWriter writer=new PrintWriter(System.out);
    try {
      processReader(s,reader,writer);
    }
  finally {
      reader.close();
      writer.close();
    }
  }
 else {
    Iterator i=args.iterator();
    while (i.hasNext()) {
      String filename=(String)i.next();
      File file=huntForTheScriptFile(filename);
      processFile(s,file);
    }
  }
}
