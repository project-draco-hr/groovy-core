{
  this.classNode=node;
  if ((classNode.getModifiers() & Opcodes.ACC_INTERFACE) > 0) {
    ConstructorNode dummy=new ConstructorNode(0,null);
    addInitialization(node,dummy);
    node.visitContents(this);
    return;
  }
  ClassNode[] classNodes=classNode.getInterfaces();
  List interfaces=new ArrayList();
  for (int i=0; i < classNodes.length; i++) {
    ClassNode classNode=classNodes[i];
    interfaces.add(classNode.getName());
  }
  Set interfaceSet=new HashSet(interfaces);
  if (interfaceSet.size() != interfaces.size()) {
    throw new RuntimeParserException("Duplicate interfaces in implements list: " + interfaces,classNode);
  }
  addDefaultParameterMethods(node);
  addDefaultParameterConstructors(node);
  final String classInternalName=BytecodeHelper.getClassInternalName(node);
  addStaticMetaClassField(node,classInternalName);
  boolean knownSpecialCase=node.isDerivedFrom(ClassHelper.GSTRING_TYPE) || node.isDerivedFrom(ClassHelper.make(GroovyObjectSupport.class));
  if (!knownSpecialCase)   addGroovyObjectInterfaceAndMethods(node,classInternalName);
  addDefaultConstructor(node);
  if (!(node instanceof InnerClassNode))   addTimeStamp(node);
  addInitialization(node);
  checkReturnInObjectInitializer(node.getObjectInitializerStatements());
  node.getObjectInitializerStatements().clear();
  addCovariantMethods(node);
  node.visitContents(this);
}
