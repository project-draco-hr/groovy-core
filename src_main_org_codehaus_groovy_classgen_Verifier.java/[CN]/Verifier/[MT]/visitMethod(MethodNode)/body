{
  if (!node.isVoidMethod()) {
    Statement statement=node.getCode();
    if (statement instanceof ExpressionStatement) {
      ExpressionStatement expStmt=(ExpressionStatement)statement;
      node.setCode(new ReturnStatement(expStmt.getExpression()));
    }
 else     if (statement instanceof BlockStatement) {
      BlockStatement block=(BlockStatement)statement;
      List list=new ArrayList(block.getStatements());
      if (!list.isEmpty()) {
        int idx=list.size() - 1;
        Statement last=(Statement)list.get(idx);
        if (last instanceof ExpressionStatement) {
          ExpressionStatement expStmt=(ExpressionStatement)last;
          list.set(idx,new ReturnStatement(expStmt.getExpression()));
        }
 else         if (!(last instanceof ReturnStatement)) {
          list.add(new ReturnStatement(ConstantExpression.NULL));
        }
      }
 else {
        list.add(new ReturnStatement(ConstantExpression.NULL));
      }
      node.setCode(new BlockStatement(list));
    }
  }
}
