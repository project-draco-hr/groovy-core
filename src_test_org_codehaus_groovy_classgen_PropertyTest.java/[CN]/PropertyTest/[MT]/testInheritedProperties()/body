{
  ClassNode classNode=new ClassNode(Type.makeType("Foo"),ACC_PUBLIC + ACC_SUPER,Type.makeType("org.codehaus.groovy.runtime.DummyBean"));
  classNode.addProperty(new PropertyNode("bar",ACC_PUBLIC,Type.STRING_TYPE,Type.makeType("Foo"),null,null,null));
  Class fooClass=loadClass(classNode);
  assertTrue("Loaded a new class",fooClass != null);
  Object bean=fooClass.newInstance();
  assertTrue("Managed to create bean",bean != null);
  assertField(fooClass,"bar",0,Type.STRING_TYPE);
  assertGetProperty(bean,"name","James");
  assertSetProperty(bean,"name","Bob");
  assertGetProperty(bean,"bar",null);
  assertSetProperty(bean,"bar","newValue");
}
