{
  Object oldValue=null;
  if (test != null) {
    oldValue=delegate.put(key,value);
    Object result=null;
    if (test.getMaximumNumberOfParameters() == 2) {
      result=test.call(new Object[]{key,value});
    }
 else {
      result=test.call(value);
    }
    if (result != null && result instanceof Boolean && ((Boolean)result).booleanValue()) {
      if (oldValue != value) {
        pcs.firePropertyChange(String.valueOf(key),oldValue,value);
      }
    }
  }
 else {
    oldValue=delegate.put(key,value);
    if (oldValue != value) {
      pcs.firePropertyChange(String.valueOf(key),oldValue,value);
    }
  }
  return oldValue;
}
