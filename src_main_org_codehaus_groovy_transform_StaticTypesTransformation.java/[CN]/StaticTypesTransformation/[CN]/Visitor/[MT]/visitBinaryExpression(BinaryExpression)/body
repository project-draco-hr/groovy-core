{
  super.visitBinaryExpression(expression);
  ClassNode lType=getType(expression.getLeftExpression(),classNode);
  ClassNode rType=getType(expression.getRightExpression(),classNode);
  int op=expression.getOperation().getType();
  ClassNode resultType=getResultType(lType,op,rType,expression);
  if (resultType == null) {
    addStaticTypeError("tbd...",expression);
    resultType=lType;
  }
  storeType(expression,resultType);
  if (isAssignment(op)) {
    ClassNode leftRedirect=expression.getLeftExpression().getType().redirect();
    final boolean compatible=checkCompatibleAssignmentTypes(leftRedirect,resultType);
    if (!compatible) {
      addStaticTypeError("Cannot assign value of type " + resultType + " to variable of type "+ leftRedirect,expression);
    }
    storeType(expression.getLeftExpression(),resultType);
  }
}
