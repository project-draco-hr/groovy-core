{
  if (source != null) {
    if (delimited) {
      char c=source.la(1);
switch (c) {
case '{':
        balance++;
      break;
case '}':
    balance--;
  break;
}
if (balance >= 0) {
return source.consume();
}
 else {
finish();
}
}
 else {
return source.consume();
}
}
return CharStream.EOS;
}
