{
  if (nodes == null) {
    return;
  }
  init(nodes,source);
  AnnotationNode annotationNode=(AnnotationNode)nodes[0];
  AnnotatedNode annotatedNode=(AnnotatedNode)nodes[1];
  if (MY_TYPE.equals(annotationNode.getClassNode()) && annotatedNode instanceof MethodNode) {
    MethodNode methodNode=(MethodNode)annotatedNode;
    ClosureExpression closureExpression=new ClosureExpression(methodNode.getParameters(),methodNode.getCode());
    closureExpression.setVariableScope(methodNode.getVariableScope());
    ClassNode ownerClassNode=methodNode.getDeclaringClass();
    int modifiers=FieldNode.ACC_PRIVATE | FieldNode.ACC_FINAL;
    if (methodNode.isStatic()) {
      modifiers=modifiers | FieldNode.ACC_STATIC;
    }
    String memoizedClosureFieldName=buildUniqueName(ownerClassNode,methodNode);
    MethodCallExpression memoizeClosureCallExpression=new MethodCallExpression(closureExpression,MEMOIZE_METHOD_NAME,MethodCallExpression.NO_ARGUMENTS);
    FieldNode memoizedClosureField=new FieldNode(memoizedClosureFieldName,modifiers,ClassHelper.DYNAMIC_TYPE,null,memoizeClosureCallExpression);
    ownerClassNode.addField(memoizedClosureField);
    BlockStatement newCode=new BlockStatement();
    ArgumentListExpression args=new ArgumentListExpression(methodNode.getParameters());
    MethodCallExpression closureCallExpression=new MethodCallExpression(new FieldExpression(memoizedClosureField),CLOSURE_CALL_METHOD_NAME,args);
    newCode.addStatement(new ReturnStatement(closureCallExpression));
    newCode.setVariableScope(methodNode.getVariableScope());
    methodNode.setCode(newCode);
  }
}
