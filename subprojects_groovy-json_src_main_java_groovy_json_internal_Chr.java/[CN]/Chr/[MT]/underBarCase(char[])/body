{
  if (in == null || in.length == 0 || in.length == 1) {
    return in;
  }
  char[] out=null;
  int count=0;
  boolean wasLower=false;
  for (int index=0; index < in.length; index++) {
    char ch=in[index];
    boolean isUpper;
    isUpper=Character.isUpperCase(ch);
    if (wasLower && isUpper) {
      count++;
    }
    wasLower=Character.isLowerCase(ch);
  }
  out=new char[in.length + count];
  wasLower=false;
  for (int index=0, secondIndex=0; index < in.length; index++, secondIndex++) {
    char ch=in[index];
    boolean isUpper;
    isUpper=Character.isUpperCase(ch);
    if (wasLower && isUpper) {
      out[secondIndex]='_';
      secondIndex++;
    }
    if (ch == ' ' || ch == '-' || ch == '\t') {
      out[secondIndex]='_';
    }
 else {
      out[secondIndex]=Character.toUpperCase(ch);
    }
    wasLower=Character.isLowerCase(ch);
  }
  return out;
}
