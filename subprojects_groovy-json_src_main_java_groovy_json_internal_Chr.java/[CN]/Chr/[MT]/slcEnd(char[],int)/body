{
  final int end=calculateIndex(array,endIndex);
  final int newLength=end;
  if (newLength < 0) {
    throw new ArrayIndexOutOfBoundsException(String.format("start index %d, length %d",endIndex,array.length));
  }
  char[] newArray=new char[newLength];
  arraycopy(array,0,newArray,0,newLength);
  return newArray;
}
