{
  textEditor.setFont(StructuredSyntaxResources.EDITOR_FONT);
  setWheelScrollingEnabled(true);
  setViewportView(textEditor);
  textEditor.setDragEnabled(editable);
  initActions();
  DefaultStyledDocument doc=new DefaultStyledDocument();
  doc.setDocumentFilter(new GroovyFilter(doc));
  textEditor.setDocument(doc);
  this.undoManager=new TextUndoManager();
  doc.addUndoableEditListener(undoManager);
  undoManager.addPropertyChangeListener(undoAction);
  undoManager.addPropertyChangeListener(redoAction);
  doc.addDocumentListener(undoAction);
  doc.addDocumentListener(redoAction);
  InputMap im=textEditor.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
  KeyStroke ks=KeyStroke.getKeyStroke(KeyEvent.VK_Z,InputEvent.CTRL_MASK,false);
  im.put(ks,StructuredSyntaxResources.UNDO);
  ActionMap am=textEditor.getActionMap();
  am.put(StructuredSyntaxResources.UNDO,undoAction);
  ks=KeyStroke.getKeyStroke(KeyEvent.VK_Y,InputEvent.CTRL_MASK,false);
  im.put(ks,StructuredSyntaxResources.REDO);
  am.put(StructuredSyntaxResources.REDO,redoAction);
  ks=KeyStroke.getKeyStroke(KeyEvent.VK_P,InputEvent.CTRL_MASK,false);
  im.put(ks,StructuredSyntaxResources.PRINT);
  am.put(StructuredSyntaxResources.PRINT,printAction);
}
