{
  reset();
  out.println("");
  boolean complete=false;
  boolean done=false;
  while (!done) {
    try {
      pending=prompt.readLine();
    }
 catch (    IOException e) {
    }
    if (pending == null || (COMMAND_MAPPINGS.containsKey(pending) && ((Integer)COMMAND_MAPPINGS.get(pending)).intValue() == COMMAND_ID_EXIT)) {
      return null;
    }
    if (COMMAND_MAPPINGS.containsKey(pending)) {
      int code=((Integer)COMMAND_MAPPINGS.get(pending)).intValue();
switch (code) {
case COMMAND_ID_HELP:
        displayHelp();
      break;
case COMMAND_ID_DISCARD:
    reset();
  done=true;
break;
case COMMAND_ID_DISPLAY:
displayStatement();
break;
case COMMAND_ID_EXPLAIN:
explainStatement();
break;
case COMMAND_ID_BINDING:
displayBinding();
break;
case COMMAND_ID_EXECUTE:
if (complete) {
done=true;
}
 else {
err.println("statement not complete");
}
break;
case COMMAND_ID_DISCARD_LOADED_CLASSES:
resetLoadedClasses();
break;
case COMMAND_ID_INSPECT:
inspect();
break;
}
continue;
}
freshen();
if (pending.trim().equals("")) {
accept();
continue;
}
final String code=current();
if (parse(code,1)) {
accept();
complete=true;
}
 else if (error == null) {
accept();
}
 else {
report();
}
}
return accepted(complete);
}
