{
  boolean parsed=false;
  parser=null;
  stream=null;
  error=null;
  tree=null;
  try {
    parser=SourceUnit.create("groovysh script",code,tolerance);
    parser.parse();
    tree=parser.getCST();
    parsed=true;
  }
 catch (  CompilationFailedException e) {
    if (parser.getErrorCount() > 1 || !parser.failedWithUnexpectedEOF()) {
      error=e;
    }
  }
catch (  Exception e) {
    error=e;
  }
  return parsed;
}
