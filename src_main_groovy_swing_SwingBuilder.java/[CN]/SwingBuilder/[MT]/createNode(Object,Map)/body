{
  constraints=attributes.remove("constraints");
  Object widget=null;
  if (passThroughNodes.containsKey(name)) {
    widget=attributes.get(name);
    if ((widget != null) && ((Class)passThroughNodes.get(name)).isAssignableFrom(widget.getClass())) {
      if (widget instanceof Window) {
        containingWindows.add(widget);
      }
      attributes.remove(name);
    }
 else {
      widget=null;
    }
  }
  if (widget == null) {
    Factory factory=(Factory)factories.get(name);
    if (factory != null) {
      try {
        widget=factory.newInstance(attributes);
        if (widget == null) {
          log.log(Level.WARNING,"Factory for name: " + name + " returned null");
        }
 else {
          if (log.isLoggable(Level.FINE)) {
            log.fine("For name: " + name + " created widget: "+ widget);
          }
        }
      }
 catch (      Exception e) {
        throw new RuntimeException("Failed to create component for" + name + " reason: "+ e,e);
      }
    }
 else {
      log.log(Level.WARNING,"Could not find match for name: " + name);
    }
  }
  handleWidgetAttributes(widget,attributes);
  return widget;
}
