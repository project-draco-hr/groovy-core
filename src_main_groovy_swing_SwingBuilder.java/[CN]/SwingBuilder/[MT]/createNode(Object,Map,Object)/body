{
  String widgetName=(String)attributes.remove("id");
  constraints=attributes.remove("constraints");
  Object widget;
  Factory factory=(Factory)factories.get(name);
  if (factory == null) {
    log.log(Level.WARNING,"Could not find match for name: " + name);
    return null;
  }
  try {
    widget=factory.newInstance(this,name,value,attributes);
    if (widget == null) {
      log.log(Level.WARNING,"Factory for name: " + name + " returned null");
      return null;
    }
    if (widgetName != null) {
      widgets.put(widgetName,widget);
    }
    if (log.isLoggable(Level.FINE)) {
      log.fine("For name: " + name + " created widget: "+ widget);
    }
  }
 catch (  Exception e) {
    throw new RuntimeException("Failed to create component for '" + name + "' reason: "+ e,e);
  }
  handleWidgetAttributes(widget,attributes);
  return widget;
}
