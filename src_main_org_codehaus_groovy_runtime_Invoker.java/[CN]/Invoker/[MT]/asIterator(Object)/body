{
  if (value == null) {
    Collections.EMPTY_LIST.iterator();
  }
  if (value instanceof Iterator) {
    return (Iterator)value;
  }
 else   if (value instanceof Enumeration) {
    final Enumeration enumeration=(Enumeration)value;
    return new Iterator(){
      private Object last;
      public boolean hasNext(){
        return enumeration.hasMoreElements();
      }
      public Object next(){
        last=enumeration.nextElement();
        return last;
      }
      public void remove(){
        throw new UnsupportedOperationException("Cannot remove() from an Enumeration");
      }
    }
;
  }
 else   if (value instanceof Matcher) {
    final Matcher matcher=(Matcher)value;
    return new Iterator(){
      private boolean found=false;
      private boolean done=false;
      public boolean hasNext(){
        if (done)         return false;
        if (!found) {
          found=matcher.find();
          if (!found)           done=true;
        }
        return found;
      }
      public Object next(){
        if (!found) {
          if (!hasNext()) {
            throw new NoSuchElementException();
          }
        }
        found=false;
        return matcher.group();
      }
      public void remove(){
        throw new UnsupportedOperationException();
      }
    }
;
  }
 else {
    try {
      Method method=value.getClass().getMethod("iterator",EMPTY_TYPES);
      if (method != null) {
        return (Iterator)method.invoke(value,EMPTY_ARGUMENTS);
      }
    }
 catch (    Exception e) {
    }
  }
  return asCollection(value).iterator();
}
