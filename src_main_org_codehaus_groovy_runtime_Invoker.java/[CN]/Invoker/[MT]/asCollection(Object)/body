{
  if (value == null) {
    return Collections.EMPTY_LIST;
  }
 else   if (value instanceof Collection) {
    return (Collection)value;
  }
 else   if (value instanceof Map) {
    Map map=(Map)value;
    return map.entrySet();
  }
 else   if (value.getClass().isArray()) {
    return Arrays.asList((Object[])value);
  }
 else   if (value instanceof MethodClosure) {
    MethodClosure method=(MethodClosure)value;
    IteratorClosureAdapter adapter=new IteratorClosureAdapter(method.getDelegate());
    method.call(adapter);
    return adapter.asList();
  }
 else {
    return Collections.singletonList(value);
  }
}
