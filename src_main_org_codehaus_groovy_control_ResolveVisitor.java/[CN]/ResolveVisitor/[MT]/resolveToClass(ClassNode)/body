{
  String name=type.getName();
  Object cached=cachedClasses.get(name);
  if (cached == NO_CLASS)   return false;
  if (cached != null) {
    type.setRedirect((ClassNode)cached);
    return true;
  }
  if (type instanceof LowerCaseClass) {
    cachedClasses.put(name,NO_CLASS);
    return false;
  }
  if (currentClass.getModule().hasPackageName() && name.indexOf('.') == -1)   return false;
  GroovyClassLoader loader=compilationUnit.getClassLoader();
  Class cls;
  try {
    cls=loader.loadClass(name,false,true);
  }
 catch (  ClassNotFoundException cnfe) {
    cachedClasses.put(name,NO_CLASS);
    return resolveToScript(type);
  }
catch (  CompilationFailedException cfe) {
    compilationUnit.getErrorCollector().addErrorAndContinue(new ExceptionMessage(cfe,true,source));
    return resolveToScript(type);
  }
  if (cls == null)   return false;
  ClassNode cn=ClassHelper.make(cls);
  cachedClasses.put(name,cn);
  type.setRedirect(cn);
  return cls.getClassLoader() == loader || resolveToScript(type);
}
