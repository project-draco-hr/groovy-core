{
  if (type.isResolved())   return true;
  resolveGenericsTypes(type.getGenericsTypes());
  if (type.isArray()) {
    ClassNode element=type.getComponentType();
    boolean resolved=resolve(element,testModuleImports,testDefaultImports,testStaticInnerClasses);
    if (resolved) {
      ClassNode cn=element.makeArray();
      type.setRedirect(cn);
    }
    return resolved;
  }
  if (currentClass == type)   return true;
  if (genericParameterNames.get(type.getName()) != null) {
    GenericsType gt=(GenericsType)genericParameterNames.get(type.getName());
    type.setRedirect(gt.getType());
    type.setGenericsTypes(new GenericsType[]{gt});
    type.setGenericsPlaceHolder(true);
    return true;
  }
  if (currentClass.getNameWithoutPackage().equals(type.getName())) {
    type.setRedirect(currentClass);
    return true;
  }
  return resolveFromModule(type,testModuleImports) || resolveFromCompileUnit(type) || resolveFromDefaultImports(type,testDefaultImports)|| resolveFromStaticInnerClasses(type,testStaticInnerClasses)|| resolveFromClassCache(type)|| resolveToClass(type)|| resolveToScript(type);
}
