{
  try {
    String line=null;
    script.setProperty("out",writer);
    while ((line=reader.readLine()) != null) {
      System.out.println(line);
      script.setProperty("line",line);
      Object o=script.run();
      writer.println(o);
      writer.flush();
    }
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
 finally {
    try {
      writer.close();
    }
  finally {
      try {
        socket.close();
      }
 catch (      IOException e3) {
        e3.printStackTrace();
      }
    }
  }
}
