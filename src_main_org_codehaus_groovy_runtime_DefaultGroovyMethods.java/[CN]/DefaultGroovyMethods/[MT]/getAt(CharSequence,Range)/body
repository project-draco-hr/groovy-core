{
  int from=normaliseIndex(DefaultTypeTransformation.intUnbox(range.getFrom()),text.length());
  int to=normaliseIndex(DefaultTypeTransformation.intUnbox(range.getTo()),text.length());
  if (from > to) {
    int tmp=from;
    from=to;
    to=tmp;
  }
  CharSequence sequence=text.subSequence(from,to + 1);
  return range.isReverse() ? reverse((String)sequence) : sequence;
}
