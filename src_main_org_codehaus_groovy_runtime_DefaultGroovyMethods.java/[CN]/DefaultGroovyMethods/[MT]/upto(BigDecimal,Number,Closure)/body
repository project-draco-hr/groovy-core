{
  BigDecimal one=new BigDecimal(1.0);
  if (to instanceof BigDecimal) {
    for (BigDecimal i=self, size=(BigDecimal)to; i.compareTo(size) <= 0; i=i.add(one)) {
      closure.call(i);
    }
  }
 else   if (to instanceof BigInteger) {
    for (BigDecimal i=self, size=new BigDecimal((BigInteger)to); i.compareTo(size) <= 0; i=i.add(one)) {
      closure.call(i);
    }
  }
 else {
    for (BigDecimal i=self, size=new BigDecimal(to.doubleValue()); i.compareTo(size) <= 0; i=i.add(one)) {
      closure.call(i);
    }
  }
}
