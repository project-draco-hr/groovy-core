{
  if (lineSeparator == null) {
    final StringWriter sw=new StringWriter(2);
    try {
      final BufferedWriter bw=new BufferedWriter(sw);
      bw.newLine();
      bw.flush();
      lineSeparator=sw.toString();
    }
 catch (    IOException ioe) {
      lineSeparator="\n";
    }
  }
  self=normalize(self);
  if (!lineSeparator.equals("\n")) {
    self=self.replace("\n",lineSeparator);
  }
  return self;
}
