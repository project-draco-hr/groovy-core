{
  Matcher matcher=Pattern.compile(regex).matcher(self);
  if (matcher.find()) {
    matcher.reset();
    StringBuffer sb=new StringBuffer();
    while (matcher.find()) {
      String foundText=self.substring(matcher.start(0),matcher.end(0));
      matcher.appendReplacement(sb,String.valueOf(closure.call(foundText)));
    }
    matcher.appendTail(sb);
    return sb.toString();
  }
 else {
    return self;
  }
}
