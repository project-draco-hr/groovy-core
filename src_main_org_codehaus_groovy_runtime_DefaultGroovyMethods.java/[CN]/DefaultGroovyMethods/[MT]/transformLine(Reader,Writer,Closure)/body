{
  BufferedReader br=new BufferedReader(reader);
  BufferedWriter bw=new BufferedWriter(writer);
  String line;
  while ((line=br.readLine()) != null) {
    Object o=closure.call(line);
    if (o != null) {
      bw.write(o.toString());
      bw.newLine();
    }
  }
  bw.flush();
}
