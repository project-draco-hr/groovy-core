{
  if (metaClass instanceof HandleMetaClass)   metaClass=((HandleMetaClass)metaClass).getAdaptee();
  if (self instanceof GroovyObject) {
    ((GroovyObject)self).setMetaClass(metaClass);
    Field sdyn;
    Class c=self.getClass();
    try {
      sdyn=c.getDeclaredField(Verifier.STATIC_METACLASS_BOOL);
      sdyn.setBoolean(null,true);
    }
 catch (    Throwable e) {
    }
  }
 else   if (self instanceof Class) {
    ((MetaClassRegistryImpl)GroovySystem.getMetaClassRegistry()).setMetaClass((Class)self,metaClass);
  }
 else {
    ((MetaClassRegistryImpl)GroovySystem.getMetaClassRegistry()).setMetaClass(self,metaClass);
  }
}
