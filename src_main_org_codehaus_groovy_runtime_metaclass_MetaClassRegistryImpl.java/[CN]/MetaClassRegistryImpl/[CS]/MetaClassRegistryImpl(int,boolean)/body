{
  this.useAccessible=useAccessible;
  if (loadDefault == LOAD_DEFAULT) {
    HashMap map=new HashMap();
    registerMethods(DefaultGroovyMethods.class,true,true,map);
    Class[] pluginDGMs=VMPluginFactory.getPlugin().getPluginDefaultGroovyMethods();
    for (int i=0; i < pluginDGMs.length; i++) {
      registerMethods(pluginDGMs[i],false,true,map);
    }
    registerMethods(DefaultGroovyStaticMethods.class,false,false,map);
    for (Iterator it=map.entrySet().iterator(); it.hasNext(); ) {
      Map.Entry e=(Map.Entry)it.next();
      CachedClass cls=(CachedClass)e.getKey();
      ArrayList list=(ArrayList)e.getValue();
      cls.setNewMopMethods(list);
    }
  }
  installMetaClassCreationHandle();
  final MetaClass emcMetaClass=metaClassCreationHandle.create(ExpandoMetaClass.class,this);
  emcMetaClass.initialize();
  ClassInfo.getClassInfo(ExpandoMetaClass.class).setStrongMetaClass(emcMetaClass);
  addMetaClassRegistryChangeEventListener(new MetaClassRegistryChangeEventListener(){
    public void updateConstantMetaClass(    MetaClassRegistryChangeEvent cmcu){
synchronized (metaClassInfo) {
        metaClassInfo.add(cmcu.getNewMetaClass());
      }
    }
  }
);
}
