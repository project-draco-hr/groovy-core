{
  VarScope scope=currentScope;
  currentScope=new VarScope(!jroseRule,currentScope);
  if (expression.isParameterSpecified()) {
    Parameter[] parameters=expression.getParameters();
    for (int i=0; i < parameters.length; i++) {
      declare(new Var(parameters[i],false),expression);
    }
  }
 else {
    if (jroseRule) {
      JRoseCheck check=new JRoseCheck();
      expression.visit(check);
      if (check.itUsed)       declare(new Var("it"),expression);
    }
 else {
      currentScope.declares.put("it",new Var("it"));
    }
  }
  super.visitClosureExpression(expression);
  currentScope=scope;
}
