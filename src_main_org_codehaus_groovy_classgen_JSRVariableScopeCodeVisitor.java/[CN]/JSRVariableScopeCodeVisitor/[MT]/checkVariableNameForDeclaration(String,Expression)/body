{
  if (name.equals("this"))   return;
  if (name.equals("super"))   return;
  VariableScope scope=currentScope;
  while (scope != null) {
    if (scope.getDeclaredVariables().contains(name))     break;
    if (scope.getReferencedVariables().contains(name))     break;
    scope.getReferencedVariables().add(name);
    scope=scope.getParent();
  }
  if (scope == null) {
    throw new GroovyRuntimeException("The variable " + name + " is undefined in the current scope",expression);
  }
}
