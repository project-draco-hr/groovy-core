{
  Var var=new Var(name);
  if ("super".equals(var.name) || "this".equals(var.name))   return null;
  VarScope scope=currentScope;
  while (scope != null) {
    if (scope.declares.get(var.name) != null) {
      var=(Var)scope.declares.get(var.name);
      break;
    }
    if (scope.visibles.get(var.name) != null) {
      var=(Var)scope.visibles.get(var.name);
      break;
    }
    scope=scope.parent;
  }
  VarScope end=scope;
  if (scope == null) {
    declare(var,expression);
    if (!scriptMode)     addError("The variable " + var.name + " is undefined in the current scope",expression);
  }
 else {
    scope=currentScope;
    while (scope != end) {
      scope.visibles.put(var.name,var);
      scope=scope.parent;
    }
  }
  return var;
}
