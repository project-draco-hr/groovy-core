{
  VariableScopeCodeVisitor visitor=getClosureVisitor();
  visitor.setParameters(expression.getParameters());
  expression.getCode().visit(visitor);
  if (!outer) {
    referencedVariables.addAll(visitor.referencedVariables);
    declaredVariables.addAll(visitor.declaredVariables);
  }
}
