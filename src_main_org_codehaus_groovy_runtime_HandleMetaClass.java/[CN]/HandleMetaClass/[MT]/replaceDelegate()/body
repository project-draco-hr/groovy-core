{
  if (object == null) {
    if (!(delegate instanceof ExpandoMetaClass)) {
      delegate=new ExpandoMetaClass(delegate.getTheClass(),true,true);
      delegate.initialize();
    }
    DefaultGroovyMethods.setMetaClass(delegate.getTheClass(),delegate);
  }
 else {
    if (object != NONE) {
      delegate=new ExpandoMetaClass(delegate.getTheClass(),false,true);
      delegate.initialize();
      DefaultGroovyMethods.setMetaClass(object,delegate);
      object=NONE;
    }
  }
  return (GroovyObject)delegate;
}
