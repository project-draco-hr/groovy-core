{
  int from=normaliseIndex(DefaultTypeTransformation.intUnbox(range.getFrom()),text.length());
  int to=normaliseIndex(DefaultTypeTransformation.intUnbox(range.getTo()),text.length());
  boolean reverse=range.isReverse();
  if (from > to) {
    int tmp=to;
    to=from;
    from=tmp;
    reverse=!reverse;
  }
  String answer=text.substring(from,to + 1);
  if (reverse) {
    answer=reverse(answer);
  }
  return answer;
}
