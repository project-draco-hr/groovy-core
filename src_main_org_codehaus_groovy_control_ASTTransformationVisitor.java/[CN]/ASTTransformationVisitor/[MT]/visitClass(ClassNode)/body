{
  Map<ASTSingleNodeTransformation,ASTNode> baseTransforms=classNode.getModule().getSingleNodeTransforms(phase);
  if (!baseTransforms.isEmpty()) {
    transforms=new HashMap<ASTNode,List<ASTSingleNodeTransformation>>();
    for (    Map.Entry<ASTSingleNodeTransformation,ASTNode> entry : baseTransforms.entrySet()) {
      List<ASTSingleNodeTransformation> list=transforms.get(entry.getValue());
      if (list == null) {
        list=new ArrayList<ASTSingleNodeTransformation>();
        transforms.put(entry.getValue(),list);
      }
      list.add(entry.getKey());
    }
    targetNodes=new LinkedList<ASTNode[]>();
    super.visitClass(classNode);
    for (    ASTNode[] node : targetNodes) {
      for (      ASTSingleNodeTransformation snt : transforms.get(node[0])) {
        snt.visit(node,source,context);
      }
    }
  }
}
