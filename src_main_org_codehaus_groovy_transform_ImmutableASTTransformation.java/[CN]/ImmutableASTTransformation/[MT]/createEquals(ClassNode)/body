{
  boolean hasExistingEquals=hasDeclaredMethod(cNode,"equals",1);
  if (hasExistingEquals && hasDeclaredMethod(cNode,"_equals",1))   return;
  final BlockStatement body=new BlockStatement();
  Expression other=new VariableExpression("other");
  body.addStatement(returnFalseIfNull(other));
  body.addStatement(returnFalseIfWrongType(cNode,other));
  body.addStatement(returnTrueIfIdentical(VariableExpression.THIS_EXPRESSION,other));
  body.addStatement(new ExpressionStatement(new BinaryExpression(other,ASSIGN,new CastExpression(cNode,other))));
  final List<PropertyNode> list=cNode.getProperties();
  for (  PropertyNode pNode : list) {
    body.addStatement(returnFalseIfPropertyNotEqual(pNode,other));
  }
  body.addStatement(new ReturnStatement(ConstantExpression.TRUE));
  Parameter[] params={new Parameter(OBJECT_TYPE,"other")};
  cNode.addMethod(new MethodNode(hasExistingEquals ? "_equals" : "equals",hasExistingEquals ? ACC_PRIVATE : ACC_PUBLIC,ClassHelper.boolean_TYPE,params,ClassNode.EMPTY_ARRAY,body));
}
