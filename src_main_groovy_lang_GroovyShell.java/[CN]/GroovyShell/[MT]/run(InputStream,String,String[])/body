{
  GroovyCodeSource gcs=(GroovyCodeSource)AccessController.doPrivileged(new PrivilegedAction(){
    public Object run(){
      try {
        return new GroovyCodeSource(DefaultGroovyMethods.getText(in),fileName,"/groovy/shell");
      }
 catch (      IOException e) {
        throw new RuntimeException("Impossible to read the content of the input stream for file named: " + fileName,e);
      }
    }
  }
);
  Class scriptClass=parseClass(gcs);
  return runScriptOrMainOrTestOrRunnable(scriptClass,args);
}
