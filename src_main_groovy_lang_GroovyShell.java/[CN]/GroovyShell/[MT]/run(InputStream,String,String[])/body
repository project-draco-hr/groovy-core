{
  GroovyCodeSource gcs=AccessController.doPrivileged(new PrivilegedAction<GroovyCodeSource>(){
    public GroovyCodeSource run(){
      try {
        String scriptText=config.getSourceEncoding() != null ? DefaultGroovyMethods.getText(in,config.getSourceEncoding()) : DefaultGroovyMethods.getText(in);
        return new GroovyCodeSource(scriptText,fileName,DEFAULT_CODE_BASE);
      }
 catch (      IOException e) {
        throw new RuntimeException("Impossible to read the content of the input stream for file named: " + fileName,e);
      }
    }
  }
);
  Class scriptClass=parseClass(gcs);
  return runScriptOrMainOrTestOrRunnable(scriptClass,args);
}
