{
  final Package pack=claz.getPackage();
  final String packageName="groovy.runtime.metaclassactions." + ((pack == null) ? "" : pack.getName() + ".");
  setUpGenerators(claz);
  try {
    final Class actionsClass=Class.forName(packageName + claz.getSimpleName() + "MetaClassActions");
    this.actions=(MetaClassActions)actionsClass.newInstance();
  }
 catch (  final Exception e1) {
    final File generatedFile=new File("generated/" + packageName.replace('.','/'));
    generatedFile.mkdirs();
    try {
      final Writer out=new FileWriter(new File(generatedFile,claz.getSimpleName() + "MetaClassActions.java"));
      try {
        out.write(generateJavaFile(claz));
      }
  finally {
        out.close();
      }
    }
 catch (    final IOException e) {
      e.printStackTrace();
    }
  }
}
