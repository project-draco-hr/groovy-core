{
  try {
    Constructor constructor=scriptClass.getConstructor(new Class[]{});
    final GroovyObject object=(GroovyObject)constructor.newInstance(new Object[]{});
    Script script=null;
    if (object instanceof Script) {
      script=(Script)object;
    }
 else {
      script=new Script(){
        public Object run(){
          object.invokeMethod("main",new Object[]{new String[0]});
          return null;
        }
      }
;
    }
    Method setBindings=script.getClass().getMethod("setBindings",new Class[]{Binding.class});
    setBindings.invoke(script,new Object[]{context});
    return script;
  }
 catch (  Exception e) {
    throw new GroovyRuntimeException("Failed to create Script instance for class: " + scriptClass + ". Reason: "+ e,e);
  }
}
