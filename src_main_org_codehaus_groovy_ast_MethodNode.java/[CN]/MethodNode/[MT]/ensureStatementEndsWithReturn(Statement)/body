{
  if (code instanceof BlockStatement) {
    BlockStatement block=(BlockStatement)code;
    List statements=block.getStatements();
    boolean shouldAdd=statements.isEmpty();
    if (!shouldAdd) {
      Statement statement=(Statement)statements.get(statements.size() - 1);
      if (!(statement instanceof ReturnStatement)) {
        shouldAdd=true;
      }
    }
    if (shouldAdd) {
      List newList=new ArrayList(statements.size() + 1);
      newList.addAll(statements);
      newList.add(ReturnStatement.RETURN_NULL);
      return new BlockStatement(newList);
    }
  }
 else   if (!(code instanceof ReturnStatement)) {
    List newList=new ArrayList(2);
    newList.add(code);
    newList.add(ReturnStatement.RETURN_NULL);
    return new BlockStatement(newList);
  }
  return code;
}
