{
  String path=(String)request.getAttribute("javax.servlet.include.servlet_path");
  if (path == null) {
    path=request.getServletPath();
  }
  URL url=resolveTemplateName(path);
  if (url == null) {
    url=resolveTemplateName(request.getRequestURI());
  }
  if (url == null) {
    String uri=request.getRequestURI();
    servletContext.log("Resource \"" + uri + "\" not found.");
    throw new FileNotFoundException(uri);
  }
  return getTemplate(url);
}
