{
  if (node.getAnnotations().isEmpty()) {
    return;
  }
  this.currentClass.setAnnotated(true);
  if (!isAnnotationCompatible()) {
    addError("Annotations are not supported in the current runtime. " + JVM_ERROR_MESSAGE,node);
    return;
  }
  Collection annotations=node.getAnnotations();
  for (Iterator it=annotations.iterator(); it.hasNext(); ) {
    AnnotationNode annotation=visitAnnotation((AnnotationNode)it.next());
    boolean isTargetAnnotation=annotation.getClassNode().isResolved() && annotation.getClassNode().getTypeClass() == Target.class;
    if (!isTargetAnnotation && !annotation.isTargetAllowed(target)) {
      addError("Annotation @" + annotation.getClassNode().getName() + " is not allowed on element "+ AnnotationNode.targetToName(target),annotation);
    }
  }
}
