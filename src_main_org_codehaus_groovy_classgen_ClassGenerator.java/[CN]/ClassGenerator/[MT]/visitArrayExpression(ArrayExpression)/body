{
  String typeName=getClassInternalName(expression.getType());
  Expression sizeExpression=expression.getSizeExpression();
  if (sizeExpression != null) {
    visitAndAutobox(sizeExpression);
    asIntMethod.call(cv);
    cv.visitTypeInsn(ANEWARRAY,typeName);
  }
 else {
    int size=expression.getExpressions().size();
    pushConstant(size);
    cv.visitTypeInsn(ANEWARRAY,typeName);
    for (int i=0; i < size; i++) {
      cv.visitInsn(DUP);
      pushConstant(i);
      Expression elementExpression=expression.getExpression(i);
      if (elementExpression == null) {
        ConstantExpression.NULL.visit(this);
      }
 else {
        visitAndAutobox(elementExpression);
      }
      cv.visitInsn(AASTORE);
    }
  }
}
