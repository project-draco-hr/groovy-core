{
  VariableScope outerScope=getVariableScope();
  VariableScope innerScope=outerScope.createCompositeChildScope();
  Set outerDecls=outerScope.getDeclaredVariables();
  Set outerRefs=outerScope.getReferencedVariables();
  Set innerDecls=innerScope.getDeclaredVariables();
  Set innerRefs=innerScope.getReferencedVariables();
  mutableVars.clear();
  for (Iterator iter=innerDecls.iterator(); iter.hasNext(); ) {
    String var=(String)iter.next();
    if ((outerDecls.contains(var) || outerRefs.contains(var)) && classNode.getField(var) == null) {
      mutableVars.add(var);
    }
  }
  for (Iterator iter=innerRefs.iterator(); iter.hasNext(); ) {
    String var=(String)iter.next();
    if (outerDecls.contains(var) && classNode.getField(var) == null) {
      mutableVars.add(var);
    }
  }
}
