{
  Map propertyMap=(Map)classPropertyIndex.get(theClass);
  for (int i=0; i < propertyDescriptors.length; i++) {
    PropertyDescriptor pd=propertyDescriptors[i];
    if (pd.getPropertyType() == null)     continue;
    Method method=pd.getReadMethod();
    MetaMethod getter;
    if (method != null)     getter=findMethod(method);
 else     getter=null;
    MetaMethod setter;
    method=pd.getWriteMethod();
    if (method != null)     setter=findMethod(method);
 else     setter=null;
    MetaBeanProperty mp=new MetaBeanProperty(pd.getName(),pd.getPropertyType(),getter,setter);
    MetaFieldProperty field=null;
    MetaProperty old=(MetaProperty)propertyMap.get(pd.getName());
    if (old != null) {
      if (old instanceof MetaBeanProperty) {
        field=((MetaBeanProperty)old).getField();
      }
 else {
        field=(MetaFieldProperty)old;
      }
      mp.setField(field);
    }
    propertyMap.put(pd.getName(),mp);
  }
}
