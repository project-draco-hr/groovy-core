{
  Map methodIndex;
  if (isCallToSuper) {
    methodIndex=(Map)classMethodIndexForSuper.getNullable(sender);
  }
 else {
    methodIndex=(Map)classMethodIndex.getNullable(sender);
  }
  List answer;
  if (methodIndex != null) {
    answer=(List)methodIndex.get(name);
    if (answer == null)     answer=Collections.EMPTY_LIST;
  }
 else {
    answer=Collections.EMPTY_LIST;
  }
  if (!isCallToSuper && GroovyCategorySupport.hasCategoryInAnyThread()) {
    List used=GroovyCategorySupport.getCategoryMethods(sender,name);
    if (used != null) {
      answer=new ArrayList(answer);
      for (Iterator iter=used.iterator(); iter.hasNext(); ) {
        MetaMethod element=(MetaMethod)iter.next();
        removeMatchingMethod(answer,element);
      }
      answer.addAll(used);
    }
  }
  return answer;
}
