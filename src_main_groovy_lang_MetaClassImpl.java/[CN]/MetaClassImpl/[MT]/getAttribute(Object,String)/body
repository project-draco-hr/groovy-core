{
  PrivilegedActionException firstException=null;
  final Class clazz;
  if (object instanceof Class) {
    clazz=(Class)object;
  }
 else {
    clazz=getTheClass();
  }
  try {
    return AccessController.doPrivileged(new PrivilegedExceptionAction(){
      public Object run() throws NoSuchFieldException, IllegalAccessException {
        final Field field=clazz.getDeclaredField(attribute);
        field.setAccessible(true);
        return field.get(object);
      }
    }
);
  }
 catch (  final PrivilegedActionException pae) {
    firstException=pae;
  }
  try {
    return AccessController.doPrivileged(new PrivilegedExceptionAction(){
      public Object run() throws NoSuchFieldException, IllegalAccessException {
        final Field field=clazz.getField(attribute);
        field.setAccessible(true);
        return field.get(object);
      }
    }
);
  }
 catch (  final PrivilegedActionException pae) {
  }
  if (firstException.getException() instanceof NoSuchFieldException) {
    throw new MissingFieldException(attribute,getTheClass());
  }
 else {
    throw new RuntimeException(firstException.getException());
  }
}
