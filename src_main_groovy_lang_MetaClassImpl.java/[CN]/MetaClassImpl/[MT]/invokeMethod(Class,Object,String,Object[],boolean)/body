{
  checkInitalised();
  if (object == null) {
    throw new NullPointerException("Cannot invoke method: " + methodName + " on null object");
  }
  if (log.isLoggable(Level.FINER)) {
    MetaClassHelper.logMethodCall(object,methodName,originalArguments);
  }
  Object[] arguments=originalArguments;
  if (arguments == null)   arguments=EMPTY_ARGUMENTS;
  Class[] argClasses=MetaClassHelper.convertToTypeArray(arguments);
  unwrap(arguments);
  MetaMethod method=retrieveMethod(sender,methodName,argClasses,isCallToSuper);
  if (method == null && arguments.length == 1 && arguments[0] instanceof List) {
    arguments=((List)arguments[0]).toArray();
    argClasses=MetaClassHelper.convertToTypeArray(arguments);
    method=retrieveMethod(methodName,argClasses);
    if (method != null) {
      method=new TransformMetaMethod(method){
        public Object invoke(        Object object,        Object[] arguments) throws Exception {
          Object firstArgument=arguments[0];
          List list=(List)firstArgument;
          arguments=list.toArray();
          return super.invoke(object,arguments);
        }
      }
;
    }
  }
  boolean isClosure=object instanceof Closure;
  if (isClosure) {
    Closure closure=(Closure)object;
    Object delegate=closure.getDelegate();
    Object owner=closure.getOwner();
    if ("call".equals(methodName) || "doCall".equals(methodName)) {
      if (object.getClass() == MethodClosure.class) {
        MethodClosure mc=(MethodClosure)object;
        methodName=mc.getMethod();
        MetaClass ownerMetaClass=registry.getMetaClass(owner.getClass());
        return ownerMetaClass.invokeMethod(owner.getClass(),owner,methodName,arguments,false);
      }
 else       if (object.getClass() == CurriedClosure.class) {
        CurriedClosure cc=(CurriedClosure)object;
        arguments=cc.getUncurriedArguments(arguments);
        MetaClass ownerMetaClass=registry.getMetaClass(owner.getClass());
        return ownerMetaClass.invokeMethod(owner,methodName,arguments);
      }
    }
 else     if ("curry".equals(methodName)) {
      return closure.curry(arguments);
    }
    if (method == null && owner != closure) {
      MetaClass ownerMetaClass=registry.getMetaClass(owner.getClass());
      method=ownerMetaClass.retrieveMethod(methodName,argClasses);
      if (method != null)       return ownerMetaClass.invokeMethod(owner,methodName,originalArguments);
    }
    if (method == null && delegate != closure && delegate != null) {
      MetaClass delegateMetaClass=registry.getMetaClass(delegate.getClass());
      method=delegateMetaClass.retrieveMethod(methodName,argClasses);
      if (method != null)       return delegateMetaClass.invokeMethod(delegate,methodName,originalArguments);
    }
    if (method == null) {
      MissingMethodException last=null;
      if (owner != closure && (owner instanceof GroovyObject)) {
        try {
          GroovyObject go=(GroovyObject)owner;
          return go.invokeMethod(methodName,originalArguments);
        }
 catch (        MissingMethodException mme) {
          if (last == null)           last=mme;
        }
      }
      if (delegate != closure && (delegate instanceof GroovyObject)) {
        try {
          GroovyObject go=(GroovyObject)delegate;
          return go.invokeMethod(methodName,originalArguments);
        }
 catch (        MissingMethodException mme) {
          last=mme;
        }
      }
      if (last != null)       throw last;
    }
  }
  if (method != null) {
    return MetaClassHelper.doMethodInvoke(object,method,arguments);
  }
 else {
    try {
      Object value=this.getProperty(object,methodName);
      if (value instanceof Closure) {
        Closure closure=(Closure)value;
        MetaClass delegateMetaClass=closure.getMetaClass();
        return delegateMetaClass.invokeMethod(closure.getClass(),closure,"doCall",originalArguments,false);
      }
    }
 catch (    MissingPropertyException mpe) {
    }
    throw new MissingMethodException(methodName,theClass,originalArguments);
  }
}
