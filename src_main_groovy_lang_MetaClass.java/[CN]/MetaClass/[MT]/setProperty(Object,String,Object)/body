{
  PropertyDescriptor descriptor=(PropertyDescriptor)propertyDescriptors.get(property);
  if (descriptor != null) {
    Method method=descriptor.getWriteMethod();
    if (method == null) {
      throw new ReadOnlyPropertyException(property,theClass);
    }
    MetaMethod metaMethod=findMethod(method);
    Object[] arguments={newValue};
    try {
      doMethodInvoke(object,metaMethod,arguments);
    }
 catch (    GroovyRuntimeException e) {
      if (newValue instanceof List) {
        List list=(List)newValue;
        int params=list.size();
        Constructor[] constructors=descriptor.getPropertyType().getConstructors();
        for (int i=0; i < constructors.length; i++) {
          Constructor constructor=constructors[i];
          if (constructor.getParameterTypes().length == params) {
            Object value=doConstructorInvoke(constructor,list.toArray());
            doMethodInvoke(object,metaMethod,new Object[]{value});
            return;
          }
        }
        Class parameterType=method.getParameterTypes()[0];
        if (parameterType.isArray()) {
          Object objArray=asPrimitiveArray(list,parameterType);
          doMethodInvoke(object,metaMethod,new Object[]{objArray});
          return;
        }
      }
      if (newValue.getClass().isArray()) {
        List list=Arrays.asList((Object[])newValue);
        Class parameterType=method.getParameterTypes()[0];
        Class arrayType=parameterType.getComponentType();
        Object objArray=Array.newInstance(arrayType,list.size());
        for (int i=0; i < list.size(); i++) {
          List list2=Arrays.asList((Object[])list.get(i));
          Object objArray2=asPrimitiveArray(list2,arrayType);
          Array.set(objArray,i,objArray2);
        }
        doMethodInvoke(object,metaMethod,new Object[]{objArray});
        return;
      }
      throw new MissingPropertyException(property,theClass,e);
    }
    return;
  }
  try {
    MetaMethod addListenerMethod=(MetaMethod)listeners.get(property);
    if (addListenerMethod != null && newValue instanceof Closure) {
      Object proxy=createListenerProxy(addListenerMethod.getParameterTypes()[0],property,(Closure)newValue);
      doMethodInvoke(object,addListenerMethod,new Object[]{proxy});
      return;
    }
    if (genericGetMethod == null) {
      List possibleGenericMethods=getMethods("set");
      if (possibleGenericMethods != null) {
        for (Iterator i=possibleGenericMethods.iterator(); i.hasNext(); ) {
          MetaMethod mmethod=(MetaMethod)i.next();
          Class[] paramTypes=mmethod.getParameterTypes();
          if (paramTypes.length == 2 && paramTypes[0] == String.class) {
            Object[] arguments={property,newValue};
            Object answer=doMethodInvoke(object,mmethod,arguments);
            return;
          }
        }
      }
    }
 else {
      Object[] arguments={property,newValue};
      doMethodInvoke(object,genericSetMethod,arguments);
      return;
    }
    String method="set" + capitalize(property);
    try {
      invokeMethod(object,method,new Object[]{newValue});
    }
 catch (    MissingMethodException e1) {
      try {
        Field field=object.getClass().getDeclaredField(property);
        field.set(object,newValue);
      }
 catch (      Exception e2) {
        throw new MissingPropertyException(property,theClass,e2);
      }
    }
  }
 catch (  GroovyRuntimeException e) {
    throw new MissingPropertyException(property,theClass,e);
  }
}
