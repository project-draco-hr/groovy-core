{
  antElementHandler.onEndElement(null,null,antXmlContext);
  lastCompletedNode=node;
  if (parent != null) {
    log.finest("parent is not null: no perform on nodeCompleted");
    return;
  }
  if (node instanceof Task) {
    Object task=node;
    if (node instanceof UnknownElement) {
      final UnknownElement unknownElement=(UnknownElement)node;
      unknownElement.maybeConfigure();
      task=unknownElement.getRealThing();
    }
    lastCompletedNode=task;
    if (task instanceof Task) {
      InputStream originalIn=System.in;
      InputStream projectDefaultStream=this.project.getDefaultInputStream();
      this.project.setDefaultInputStream(originalIn);
      System.setIn(new DemuxInputStream(this.project));
      ((Task)task).perform();
      System.setIn(originalIn);
      this.project.setDefaultInputStream(projectDefaultStream);
    }
  }
 else {
    final RuntimeConfigurable r=(RuntimeConfigurable)node;
    r.maybeConfigure(project);
  }
}
