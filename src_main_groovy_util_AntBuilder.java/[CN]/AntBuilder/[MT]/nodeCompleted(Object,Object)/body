{
  antElementHandler.onEndElement(null,null,antXmlContext);
  lastCompletedNode=node;
  if (parent != null) {
    log.finest("parent is not null: no perform on nodeCompleted");
    return;
  }
  if (node instanceof Task) {
    Object task=node;
    if (node instanceof UnknownElement) {
      final UnknownElement unknownElement=(UnknownElement)node;
      unknownElement.maybeConfigure();
      task=unknownElement.getRealThing();
    }
    lastCompletedNode=task;
    if (task instanceof Task) {
      InputStream originalIn=System.in;
      DemuxInputStream inputStream=new DemuxInputStream(this.project);
      System.setIn(inputStream);
      ((Task)task).perform();
      System.setIn(originalIn);
      try {
        if (inputStream != null) {
          inputStream.close();
        }
      }
 catch (      IOException ioe) {
        log.log(Level.WARNING,"The wrapper input stream around System.in couldn't be closed.");
      }
    }
  }
 else {
    final RuntimeConfigurable r=(RuntimeConfigurable)node;
    r.maybeConfigure(project);
  }
}
