{
  boolean sourceIsNull=source instanceof ConstantExpression && ((ConstantExpression)source).getValue() == null;
  ClassNode expressionType=getType(source);
  if (targetType.isArray() && expressionType.isArray()) {
    return checkCast(targetType.getComponentType(),new VariableExpression("foo",expressionType.getComponentType()));
  }
 else   if (targetType.equals(char_TYPE) && expressionType == STRING_TYPE && source instanceof ConstantExpression && source.getText().length() == 1) {
  }
 else   if (targetType.equals(Character_TYPE) && (expressionType == STRING_TYPE || sourceIsNull) && (sourceIsNull || source instanceof ConstantExpression && source.getText().length() == 1)) {
  }
 else   if (isNumberCategory(getWrapper(targetType)) && isNumberCategory(getWrapper(expressionType))) {
  }
 else   if (sourceIsNull && !isPrimitiveType(targetType)) {
  }
 else   if (sourceIsNull && isPrimitiveType(targetType)) {
    return false;
  }
 else   if (!isAssignableTo(targetType,expressionType) && !implementsInterfaceOrIsSubclassOf(expressionType,targetType)) {
    return false;
  }
  return true;
}
