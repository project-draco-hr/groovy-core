{
  if (shouldSkipClassNode(node))   return;
  Object type=node.getNodeMetaData(StaticTypesMarker.INFERRED_TYPE);
  if (type != null) {
    errorCollector=new ErrorCollector(errorCollector.getConfiguration());
  }
  ClassNode oldCN=classNode;
  classNode=node;
  Set<MethodNode> oldVisitedMethod=alreadyVisitedMethods;
  alreadyVisitedMethods=new LinkedHashSet<MethodNode>();
  super.visitClass(node);
  Iterator<InnerClassNode> innerClasses=classNode.getInnerClasses();
  while (innerClasses.hasNext()) {
    InnerClassNode innerClassNode=innerClasses.next();
    visitClass(innerClassNode);
  }
  alreadyVisitedMethods=oldVisitedMethod;
  classNode=oldCN;
  node.putNodeMetaData(StaticTypesMarker.INFERRED_TYPE,node);
  for (  MethodNode methodNode : node.getMethods()) {
    methodNode.putNodeMetaData(StaticTypeCheckingVisitor.class,Boolean.TRUE);
  }
  for (  ConstructorNode constructorNode : node.getDeclaredConstructors()) {
    constructorNode.putNodeMetaData(StaticTypeCheckingVisitor.class,Boolean.TRUE);
  }
}
