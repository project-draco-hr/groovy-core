{
  Map<VariableExpression,List<ClassNode>> oldTracker=pushAssignmentTracking();
  pushTemporaryTypeInfo();
  expression.getBooleanExpression().visit(this);
  expression.getTrueExpression().visit(this);
  temporaryIfBranchTypeInformation.pop();
  expression.getFalseExpression().visit(this);
  final ClassNode typeOfTrue=getType(expression.getTrueExpression());
  final ClassNode typeOfFalse=getType(expression.getFalseExpression());
  storeType(expression,lowestUpperBound(typeOfTrue,typeOfFalse));
  popAssignmentTracking(oldTracker);
}
