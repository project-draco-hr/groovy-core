{
  ClassNode oldValue=(ClassNode)exp.putNodeMetaData(StaticTypesMarker.INFERRED_TYPE,cn);
  if (oldValue != null) {
    ClassNode oldDIT=(ClassNode)exp.getNodeMetaData(StaticTypesMarker.DECLARATION_INFERRED_TYPE);
    if (oldDIT != null) {
      exp.putNodeMetaData(StaticTypesMarker.DECLARATION_INFERRED_TYPE,lowestUpperBound(oldDIT,cn));
    }
 else {
      exp.putNodeMetaData(StaticTypesMarker.DECLARATION_INFERRED_TYPE,lowestUpperBound(oldValue,cn));
    }
  }
  if (exp instanceof VariableExpression) {
    final Variable accessedVariable=((VariableExpression)exp).getAccessedVariable();
    if (accessedVariable != null && accessedVariable != exp && accessedVariable instanceof VariableExpression) {
      storeType((Expression)accessedVariable,cn);
    }
  }
}
