{
  Options options=new Options();
  options.addOption(OptionBuilder.withArgName("property=value").withValueSeparator('=').hasArgs(2).create("J"));
  options.addOption(OptionBuilder.withArgName("property=value").hasArg().create("F"));
  options.addOption(OptionBuilder.withLongOpt("jointCompilation").create('j'));
  PosixParser cliParser=new PosixParser();
  CommandLine cli;
  try {
    cli=cliParser.parse(options,args);
  }
 catch (  ParseException e) {
    throw new BuildException(e);
  }
  jointCompilation=cli.hasOption('j');
  if (jointCompilation) {
    Map compilerOptions=new HashMap();
    String[] opts=cli.getOptionValues("J");
    compilerOptions.put("namedValues",opts);
    opts=cli.getOptionValues("F");
    compilerOptions.put("flags",opts);
    compilerOptions.put("stubDir",createTempDir());
    configuration.setJointCompilationOptions(compilerOptions);
  }
  return cli.getArgs();
}
