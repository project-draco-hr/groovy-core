{
  ClassLoader parent=this.getClass().getClassLoader();
  if (parent instanceof AntClassLoader) {
    AntClassLoader antLoader=(AntClassLoader)parent;
    String[] pathElm=antLoader.getClasspath().split(File.pathSeparator);
    List classpath=configuration.getClasspath();
    for (Iterator iter=classpath.iterator(); iter.hasNext(); ) {
      String cpEntry=(String)iter.next();
      boolean found=false;
      for (int i=0; i < pathElm.length; i++) {
        if (cpEntry.equals(pathElm[i])) {
          found=true;
          break;
        }
      }
      if (!found && new File(cpEntry).exists())       antLoader.addPathElement(cpEntry);
    }
  }
  return new GroovyClassLoader(parent,configuration);
}
