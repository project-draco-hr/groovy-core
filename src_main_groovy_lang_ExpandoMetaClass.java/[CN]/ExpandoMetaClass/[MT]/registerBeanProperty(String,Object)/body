{
  performOperationOnMetaClass(new Callable(){
    public void call(){
      Class type=newValue == null ? Object.class : newValue.getClass();
      MetaBeanProperty mbp=newValue instanceof MetaBeanProperty ? (MetaBeanProperty)newValue : new ThreadManagedMetaBeanProperty(theClass,property,type,newValue);
      final MetaMethod getter=mbp.getGetter();
      final MethodKey getterKey=new DefaultMethodKey(theClass,getter.getName(),new Class[0],false);
      final MetaMethod setter=mbp.getSetter();
      final MethodKey setterKey=new DefaultMethodKey(theClass,setter.getName(),setter.getParameterTypes(),false);
      addMetaMethod(getter);
      addMetaMethod(setter);
      expandoMethods.put(setterKey,setter);
      expandoMethods.put(getterKey,getter);
      expandoProperties.put(mbp.getName(),mbp);
      addMetaBeanProperty(mbp);
      performRegistryCallbacks();
    }
  }
);
}
