{
synchronized (beanPropertyCache) {
    MetaBeanProperty beanProperty=(MetaBeanProperty)beanPropertyCache.get(propertyName);
    if (beanProperty == null) {
      if (getter)       beanProperty=new MetaBeanProperty(propertyName,Object.class,metaMethod,null);
 else       beanProperty=new MetaBeanProperty(propertyName,Object.class,null,metaMethod);
      beanPropertyCache.put(propertyName,beanProperty);
    }
 else {
      if (getter) {
        MetaMethod setterMethod=beanProperty.getSetter();
        Class type=setterMethod != null ? setterMethod.getParameterTypes()[0] : Object.class;
        beanProperty=new MetaBeanProperty(propertyName,type,metaMethod,setterMethod);
        beanPropertyCache.put(propertyName,beanProperty);
      }
 else {
        MetaMethod getterMethod=beanProperty.getGetter();
        beanProperty=new MetaBeanProperty(propertyName,metaMethod.getParameterTypes()[0],getterMethod,metaMethod);
        beanPropertyCache.put(propertyName,beanProperty);
      }
    }
synchronized (expandoProperties) {
      expandoProperties.put(beanProperty.getName(),beanProperty);
    }
    addMetaBeanProperty(beanProperty);
  }
}
