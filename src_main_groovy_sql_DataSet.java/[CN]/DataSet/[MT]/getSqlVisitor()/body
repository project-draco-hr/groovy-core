{
  if (visitor == null) {
    visitor=new SqlWhereVisitor();
    if (where != null) {
      ClassNode classNode=where.getMetaClass().getClassNode();
      if (classNode == null) {
        throw new GroovyRuntimeException("Could not find the ClassNode for MetaClass: " + where.getMetaClass());
      }
      List methods=classNode.getDeclaredMethods("doCall");
      if (!methods.isEmpty()) {
        MethodNode method=(MethodNode)methods.get(0);
        if (method != null) {
          Statement statement=method.getCode();
          if (statement != null) {
            statement.visit(visitor);
          }
        }
      }
    }
  }
  return visitor;
}
