{
  final MetaClass metaClass=receiver.getMetaClass();
  CallSite site;
  if (metaClass.getClass() != MetaClassImpl.class) {
    site=new CallSite(this){
      public Object invoke(      Object receiver,      Object[] args){
        return null;
      }
      public Object callGetProperty(      Object receiver){
        if (!(receiver instanceof GroovyObject) || ((GroovyObject)receiver).getMetaClass() != metaClass)         return super.callGetProperty(receiver);
        return metaClass.getProperty(receiver,name);
      }
    }
;
  }
 else {
    final MetaProperty effective=((MetaClassImpl)metaClass).getEffectiveGetMetaProperty(metaClass.getClass(),receiver,name,false);
    if (effective != null) {
      site=new CallSite(this){
        public Object invoke(        Object receiver,        Object[] args){
          return null;
        }
        public Object callGetProperty(        Object receiver){
          if (!(receiver instanceof GroovyObject) || ((GroovyObject)receiver).getMetaClass() != metaClass)           return super.callGetProperty(receiver);
          if (GroovyCategorySupport.hasCategoryInAnyThread())           return metaClass.getProperty(receiver,name);
          return effective.getProperty(receiver);
        }
      }
;
    }
 else {
      site=new CallSite(this){
        public Object invoke(        Object receiver,        Object[] args){
          return null;
        }
        public Object callGetProperty(        Object receiver){
          if (!(receiver instanceof GroovyObject) || ((GroovyObject)receiver).getMetaClass() != metaClass)           return super.callGetProperty(receiver);
          return metaClass.getProperty(receiver,name);
        }
      }
;
    }
  }
  array.array[index]=site;
  return site;
}
