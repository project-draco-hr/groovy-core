{
  try {
    char[] value=(char[])UNSAFE.getObject(string,STRING_VALUE_FIELD_OFFSET);
    Integer offset=(Integer)UNSAFE.getObject(string,STRING_OFFSET_FIELD_OFFSET);
    Integer count=(Integer)UNSAFE.getObject(string,STRING_COUNT_FIELD_OFFSET);
    if ((offset == 0 && count == value.length)) {
      return value;
    }
 else {
      char result[]=new char[count];
      System.arraycopy(value,offset,result,0,count);
      return result;
    }
  }
 catch (  Exception ex) {
    return Exceptions.handle(char[].class,sputs("STRING str",string,ex.getMessage()),ex);
  }
}
