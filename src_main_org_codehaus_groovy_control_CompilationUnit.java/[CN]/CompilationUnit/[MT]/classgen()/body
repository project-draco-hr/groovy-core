{
  if (this.phase != Phases.CLASS_GENERATION) {
    throw new GroovyBugError("CompilationUnit not ready for classgen()");
  }
  applyToPrimaryClassNodes(classgen);
  completePhase();
  applyToSourceUnits(mark);
  if (this.progressCallback != null) {
    this.progressCallback.call(this,CompilationUnit.this.phase);
  }
}
