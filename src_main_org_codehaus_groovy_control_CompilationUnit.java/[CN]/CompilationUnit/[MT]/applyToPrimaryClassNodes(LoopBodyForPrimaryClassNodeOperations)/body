{
  boolean failures=false;
  Iterator modules=this.ast.getModules().iterator();
  while (modules.hasNext()) {
    ModuleNode module=(ModuleNode)modules.next();
    try {
      Iterator classNodes=module.getClasses().iterator();
      while (classNodes.hasNext()) {
        ClassNode classNode=(ClassNode)classNodes.next();
        SourceUnit context=module.getContext();
        if (context == null || context.phase <= phase) {
          body.call(module.getContext(),new GeneratorContext(this.ast),classNode);
        }
      }
    }
 catch (    CompilationFailedException e) {
    }
catch (    NullPointerException npe) {
      throw npe;
    }
catch (    Exception e) {
      failures=true;
      ErrorCollector nestedCollector=null;
      for (Throwable next=e.getCause(); next != e && next != null; next=next.getCause()) {
        if (!(next instanceof MultipleCompilationErrorsException))         continue;
        MultipleCompilationErrorsException mcee=(MultipleCompilationErrorsException)next;
        nestedCollector=mcee.collector;
        break;
      }
      if (nestedCollector != null) {
        getErrorCollector().addCollectorContents(nestedCollector);
      }
 else {
        getErrorCollector().addError(new ExceptionMessage(e,configuration.getDebug(),this));
      }
    }
  }
  getErrorCollector().failIfErrors();
}
