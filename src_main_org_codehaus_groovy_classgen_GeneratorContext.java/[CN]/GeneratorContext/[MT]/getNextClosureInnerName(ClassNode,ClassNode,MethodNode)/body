{
  String ownerShortName=owner.getNameWithoutPackage();
  String classShortName=enclosingClass.getNameWithoutPackage();
  if (classShortName.equals(ownerShortName)) {
    classShortName="";
  }
 else {
    classShortName+="_";
  }
  int dp=classShortName.lastIndexOf("$");
  if (dp >= 0) {
    classShortName=classShortName.substring(++dp);
  }
  if (classShortName.startsWith("_")) {
    classShortName=classShortName.substring(1);
  }
  String methodName="";
  if (enclosingMethod != null) {
    methodName=enclosingMethod.getName() + "_";
    if (enclosingClass.isDerivedFrom("groovy.lang.Closure")) {
      methodName="";
    }
    methodName=methodName.replace('<','_');
    methodName=methodName.replace('>','_');
  }
  return "_" + classShortName + methodName+ "closure"+ getNextInnerClassIdx();
}
