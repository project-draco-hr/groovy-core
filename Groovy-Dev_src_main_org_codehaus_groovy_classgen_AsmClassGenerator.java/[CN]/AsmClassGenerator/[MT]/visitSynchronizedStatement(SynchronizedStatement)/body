{
  onLineNumber(statement,"visitSynchronizedStatement");
  visitStatement(statement);
  statement.getExpression().visit(this);
  final int index=compileStack.defineTemporaryVariable("synchronized",ClassHelper.Integer_TYPE,true);
  final Label synchronizedStart=new Label();
  final Label synchronizedEnd=new Label();
  final Label catchAll=new Label();
  mv.visitVarInsn(ALOAD,index);
  mv.visitInsn(MONITORENTER);
  mv.visitLabel(synchronizedStart);
  Runnable finallyPart=new Runnable(){
    public void run(){
      mv.visitVarInsn(ALOAD,index);
      mv.visitInsn(MONITOREXIT);
    }
  }
;
  compileStack.pushFinallyBlock(finallyPart);
  statement.getCode().visit(this);
  finallyPart.run();
  mv.visitJumpInsn(GOTO,synchronizedEnd);
  mv.visitLabel(catchAll);
  finallyPart.run();
  mv.visitInsn(ATHROW);
  mv.visitLabel(synchronizedEnd);
  compileStack.popFinallyBlock();
  exceptionBlocks.add(new Runnable(){
    public void run(){
      mv.visitTryCatchBlock(synchronizedStart,catchAll,catchAll,null);
    }
  }
);
}
