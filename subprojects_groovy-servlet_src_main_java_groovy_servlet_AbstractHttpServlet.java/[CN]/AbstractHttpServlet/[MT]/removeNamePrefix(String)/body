{
  URI uri=null;
  try {
    String realPath=servletContext.getRealPath("/");
    if (realPath != null) {
      uri=new File(realPath).toURI();
      String basePath=uri.toURL().toExternalForm();
      if (name.startsWith(basePath)) {
        return name.substring(basePath.length());
      }
    }
  }
 catch (  MalformedURLException e) {
    throw new ResourceException("Malformed URL for base path '" + uri + "'",e);
  }
  try {
    URL res=servletContext.getResource("/");
    if (res != null)     uri=res.toURI();
  }
 catch (  MalformedURLException e) {
  }
catch (  URISyntaxException e) {
  }
  if (uri != null) {
    try {
      String basePath=uri.toURL().toExternalForm();
      if (name.startsWith(basePath))       return name.substring(basePath.length());
    }
 catch (    MalformedURLException e) {
      throw new ResourceException("Malformed URL for base path '" + uri + "'",e);
    }
  }
  return name;
}
