{
  int dist=0;
  ClassNode unwrapReceiver=ClassHelper.getUnwrapper(receiver);
  ClassNode unwrapCompare=ClassHelper.getUnwrapper(compare);
  if (ClassHelper.isPrimitiveType(unwrapReceiver) && ClassHelper.isPrimitiveType(unwrapCompare) && unwrapReceiver != unwrapCompare) {
    dist=getPrimitiveDistance(unwrapReceiver,unwrapCompare);
  }
  if (isPrimitiveType(receiver) && !isPrimitiveType(compare)) {
    dist=(dist + 1) << 1;
  }
  if (receiver.isArray() && !compare.isArray()) {
    dist+=256;
  }
  ClassNode ref=compare;
  while (ref != null) {
    if (receiver.equals(ref) || receiver == UNKNOWN_PARAMETER_TYPE) {
      break;
    }
    if (ref.isInterface() && receiver.implementsInterface(ref)) {
      dist+=getMaximumInterfaceDistance(receiver,ref);
      break;
    }
    ref=ref.getSuperClass();
    if (ref == null)     dist+=2;
    dist=(dist + 1) << 1;
  }
  return dist;
}
