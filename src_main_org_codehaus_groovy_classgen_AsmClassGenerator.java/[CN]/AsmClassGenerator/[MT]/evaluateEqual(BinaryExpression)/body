{
  Expression leftExpression=expression.getLeftExpression();
  if (leftExpression instanceof BinaryExpression) {
    BinaryExpression leftBinExpr=(BinaryExpression)leftExpression;
    if (leftBinExpr.getOperation().getType() == Types.LEFT_SQUARE_BRACKET) {
      visitMethodCallExpression(new MethodCallExpression(leftBinExpr.getLeftExpression(),"putAt",new ArgumentListExpression(new Expression[]{leftBinExpr.getRightExpression(),expression.getRightExpression()})));
      return;
    }
  }
  leftHandExpression=false;
  Expression rightExpression=expression.getRightExpression();
  Type type=getLHSType(leftExpression);
  if (type.isPrimitiveType()) {
    rightExpression.visit(this);
  }
 else {
    if (type != Type.OBJECT_TYPE) {
      visitCastExpression(new CastExpression(type,rightExpression));
    }
 else {
      visitAndAutoboxBoolean(rightExpression);
    }
  }
  cv.visitInsn(DUP);
  leftHandExpression=true;
  leftExpression.visit(this);
  leftHandExpression=false;
}
