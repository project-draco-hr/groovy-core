{
  onLineNumber(statement,"visitTryCatchFinally");
  visitStatement(statement);
  CatchStatement catchStatement=statement.getCatchStatement(0);
  Statement tryStatement=statement.getTryStatement();
  final Statement finallyStatement=statement.getFinallyStatement();
  int anyExceptionIndex=compileStack.defineTemporaryVariable("exception",false);
  if (!finallyStatement.isEmpty()) {
    compileStack.pushFinallyBlock(new Runnable(){
      public void run(){
        finallyStatement.visit(AsmClassGenerator.this);
      }
    }
);
  }
  final Label tryStart=new Label();
  cv.visitLabel(tryStart);
  tryStatement.visit(this);
  final Label finallyStart=new Label();
  cv.visitJumpInsn(GOTO,finallyStart);
  final Label tryEnd=new Label();
  cv.visitLabel(tryEnd);
  for (Iterator it=statement.getCatchStatements().iterator(); it.hasNext(); ) {
    catchStatement=(CatchStatement)it.next();
    ClassNode exceptionType=catchStatement.getExceptionType();
    final Label catchStart=new Label();
    cv.visitLabel(catchStart);
    compileStack.defineVariable(catchStatement.getVariable(),true);
    catchStatement.visit(this);
    cv.visitJumpInsn(GOTO,finallyStart);
    final String exceptionTypeInternalName=BytecodeHelper.getClassInternalName(exceptionType);
    exceptionBlocks.add(new Runnable(){
      public void run(){
        cv.visitTryCatchBlock(tryStart,tryEnd,catchStart,exceptionTypeInternalName);
      }
    }
);
  }
  final Label endOfAllCatches=new Label();
  cv.visitLabel(endOfAllCatches);
  if (!finallyStatement.isEmpty())   compileStack.popFinallyBlock();
  cv.visitLabel(finallyStart);
  finallyStatement.visit(this);
  Label afterFinally=new Label();
  cv.visitJumpInsn(GOTO,afterFinally);
  final Label catchAny=new Label();
  cv.visitLabel(catchAny);
  cv.visitVarInsn(ASTORE,anyExceptionIndex);
  finallyStatement.visit(this);
  cv.visitVarInsn(ALOAD,anyExceptionIndex);
  cv.visitInsn(ATHROW);
  cv.visitLabel(afterFinally);
  exceptionBlocks.add(new Runnable(){
    public void run(){
      cv.visitTryCatchBlock(tryStart,endOfAllCatches,catchAny,null);
    }
  }
);
}
