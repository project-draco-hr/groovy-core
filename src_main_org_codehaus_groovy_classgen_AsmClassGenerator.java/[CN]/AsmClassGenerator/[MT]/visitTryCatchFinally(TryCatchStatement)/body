{
  onLineNumber(statement,"visitTryCatchFinally");
  visitStatement(statement);
  Statement tryStatement=statement.getTryStatement();
  final Statement finallyStatement=statement.getFinallyStatement();
  Label tryStart=new Label();
  mv.visitLabel(tryStart);
  BlockRecorder tryBlock=makeBlockRecorder(finallyStatement);
  tryBlock.startRange(tryStart);
  tryStatement.visit(this);
  Label finallyStart=new Label();
  mv.visitJumpInsn(GOTO,finallyStart);
  Label tryEnd=new Label();
  mv.visitLabel(tryEnd);
  tryBlock.closeRange(tryEnd);
  compileStack.pop();
  BlockRecorder catches=makeBlockRecorder(finallyStatement);
  for (  CatchStatement catchStatement : statement.getCatchStatements()) {
    ClassNode exceptionType=catchStatement.getExceptionType();
    String exceptionTypeInternalName=BytecodeHelper.getClassInternalName(exceptionType);
    Label catchStart=new Label();
    mv.visitLabel(catchStart);
    catches.startRange(catchStart);
    compileStack.pushState();
    compileStack.defineVariable(catchStatement.getVariable(),true);
    catchStatement.visit(this);
    mv.visitInsn(NOP);
    compileStack.pop();
    Label catchEnd=new Label();
    mv.visitLabel(catchEnd);
    catches.closeRange(catchEnd);
    mv.visitJumpInsn(GOTO,finallyStart);
    compileStack.writeExceptionTable(tryBlock,catchStart,exceptionTypeInternalName);
  }
  Label catchAny=new Label();
  compileStack.writeExceptionTable(tryBlock,catchAny,null);
  compileStack.writeExceptionTable(catches,catchAny,null);
  compileStack.pop();
  mv.visitLabel(finallyStart);
  finallyStatement.visit(this);
  mv.visitInsn(NOP);
  Label skipCatchAll=new Label();
  mv.visitJumpInsn(GOTO,skipCatchAll);
  mv.visitLabel(catchAny);
  int anyExceptionIndex=compileStack.defineTemporaryVariable("exception",true);
  finallyStatement.visit(this);
  mv.visitVarInsn(ALOAD,anyExceptionIndex);
  mv.visitInsn(ATHROW);
  mv.visitLabel(skipCatchAll);
}
