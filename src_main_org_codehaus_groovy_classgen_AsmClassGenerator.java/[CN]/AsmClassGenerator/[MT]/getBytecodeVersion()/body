{
  ClassNode classNode=controller.getClassNode();
  if (!classNode.isUsingGenerics() && !classNode.isAnnotated() && !classNode.isAnnotationDefinition()) {
    return Opcodes.V1_3;
  }
  final String target=getCompileUnit().getConfig().getTargetBytecode();
  return CompilerConfiguration.POST_JDK5.equals(target) ? Opcodes.V1_5 : Opcodes.V1_3;
}
