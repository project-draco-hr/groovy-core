{
  onLineNumber(statement,"visitAssertStatement");
  visitStatement(statement);
  BooleanExpression booleanExpression=statement.getBooleanExpression();
  booleanExpression.visit(this);
  Label l0=new Label();
  mv.visitJumpInsn(IFEQ,l0);
  Label l1=new Label();
  mv.visitJumpInsn(GOTO,l1);
  mv.visitLabel(l0);
  String expressionText=booleanExpression.getText();
  List list=new ArrayList();
  addVariableNames(booleanExpression,list);
  if (list.isEmpty()) {
    mv.visitLdcInsn(expressionText);
  }
 else {
    boolean first=true;
    mv.visitTypeInsn(NEW,"java/lang/StringBuffer");
    mv.visitInsn(DUP);
    mv.visitLdcInsn(expressionText + ". Values: ");
    mv.visitMethodInsn(INVOKESPECIAL,"java/lang/StringBuffer","<init>","(Ljava/lang/String;)V");
    int tempIndex=compileStack.defineTemporaryVariable("assert",true);
    for (Iterator iter=list.iterator(); iter.hasNext(); ) {
      String name=(String)iter.next();
      String text=name + " = ";
      if (first) {
        first=false;
      }
 else {
        text=", " + text;
      }
      mv.visitVarInsn(ALOAD,tempIndex);
      mv.visitLdcInsn(text);
      mv.visitMethodInsn(INVOKEVIRTUAL,"java/lang/StringBuffer","append","(Ljava/lang/Object;)Ljava/lang/StringBuffer;");
      mv.visitInsn(POP);
      mv.visitVarInsn(ALOAD,tempIndex);
      new VariableExpression(name).visit(this);
      mv.visitMethodInsn(INVOKESTATIC,"org/codehaus/groovy/runtime/InvokerHelper","toString","(Ljava/lang/Object;)Ljava/lang/String;");
      mv.visitMethodInsn(INVOKEVIRTUAL,"java/lang/StringBuffer","append","(Ljava/lang/String;)Ljava/lang/StringBuffer;");
      mv.visitInsn(POP);
    }
    mv.visitVarInsn(ALOAD,tempIndex);
    compileStack.removeVar(tempIndex);
  }
  statement.getMessageExpression().visit(this);
  assertFailedMethod.call(mv);
  mv.visitLabel(l1);
}
