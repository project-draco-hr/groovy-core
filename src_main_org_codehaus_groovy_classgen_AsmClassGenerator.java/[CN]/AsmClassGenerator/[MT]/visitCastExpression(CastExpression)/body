{
  ClassNode type=castExpression.getType();
  Expression subExpression=castExpression.getExpression();
  subExpression.visit(this);
  if (castExpression.isCoerce()) {
    controller.getOperandStack().doAsType(type);
  }
 else {
    if (isNullConstant(subExpression)) {
      controller.getOperandStack().replace(type);
    }
 else {
      controller.getOperandStack().doGroovyCast(type);
    }
  }
}
