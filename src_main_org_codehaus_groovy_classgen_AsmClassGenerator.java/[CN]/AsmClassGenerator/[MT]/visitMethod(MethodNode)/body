{
  this.constructorNode=null;
  this.methodNode=node;
  this.variableScope=null;
  visitParameters(node,node.getParameters());
  node.setReturnType(checkValidType(node.getReturnType(),node,"Must be a valid return type"));
  String methodType=BytecodeHelper.getMethodDescriptor(node.getReturnType(),node.getParameters());
  cv=cw.visitMethod(node.getModifiers(),node.getName(),methodType,null,null);
  Label labelStart=new Label();
  cv.visitLabel(labelStart);
  helper=new BytecodeHelper(cv);
  findMutableVariables();
  resetVariableStack(node.getParameters());
  outputReturn=false;
  node.getCode().visit(this);
  if (!outputReturn) {
    cv.visitInsn(RETURN);
  }
  for (Iterator iter=exceptionBlocks.iterator(); iter.hasNext(); ) {
    Runnable runnable=(Runnable)iter.next();
    runnable.run();
  }
  exceptionBlocks.clear();
  Label labelEnd=new Label();
  cv.visitLabel(labelEnd);
  cv.visitMaxs(0,0);
}
