{
  if (passingClosureParams && isInScriptBody()) {
    cv.visitTypeInsn(NEW,"org/codehaus/groovy/runtime/ScriptReference");
    cv.visitInsn(DUP);
    loadThisOrOwner();
    cv.visitLdcInsn(name);
    cv.visitMethodInsn(INVOKESPECIAL,"org/codehaus/groovy/runtime/ScriptReference","<init>","(Lgroovy/lang/Script;Ljava/lang/String;)V");
  }
 else {
    visitPropertyExpression(new PropertyExpression(VariableExpression.THIS_EXPRESSION,name));
  }
}
