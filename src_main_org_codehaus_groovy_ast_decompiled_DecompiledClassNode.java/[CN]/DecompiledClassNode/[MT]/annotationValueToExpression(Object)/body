{
  if (value instanceof TypeWrapper) {
    return new ClassExpression(resolver.resolveType(Type.getType(((TypeWrapper)value).desc)));
  }
  if (value instanceof EnumConstantWrapper) {
    EnumConstantWrapper wrapper=(EnumConstantWrapper)value;
    return new PropertyExpression(new ClassExpression(resolver.resolveType(Type.getType(wrapper.enumDesc))),wrapper.constant);
  }
  if (value instanceof AnnotationStub) {
    return new AnnotationConstantExpression(createAnnotationNode((AnnotationStub)value));
  }
  if (value != null && value.getClass().isArray()) {
    ListExpression elementExprs=new ListExpression();
    int len=Array.getLength(value);
    for (int i=0; i != len; ++i) {
      elementExprs.addExpression(annotationValueToExpression(Array.get(value,i)));
    }
    return elementExprs;
  }
  if (value instanceof List) {
    ListExpression elementExprs=new ListExpression();
    for (    Object o : (List)value) {
      elementExprs.addExpression(annotationValueToExpression(o));
    }
    return elementExprs;
  }
  return new ConstantExpression(value);
}
