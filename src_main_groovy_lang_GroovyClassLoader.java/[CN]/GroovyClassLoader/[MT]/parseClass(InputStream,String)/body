{
  GroovyCodeSource gcs=(GroovyCodeSource)AccessController.doPrivileged(new PrivilegedAction(){
    public Object run(){
      try {
        String scriptText=config.getSourceEncoding() != null ? DefaultGroovyMethods.getText(in,config.getSourceEncoding()) : DefaultGroovyMethods.getText(in);
        return new GroovyCodeSource(scriptText,fileName,"/groovy/script");
      }
 catch (      IOException e) {
        throw new RuntimeException("Impossible to read the content of the input stream for file named: " + fileName,e);
      }
    }
  }
);
  return parseClass(gcs);
}
