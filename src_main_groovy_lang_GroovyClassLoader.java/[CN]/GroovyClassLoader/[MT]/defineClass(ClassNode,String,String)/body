{
  CodeSource codeSource=null;
  try {
    codeSource=new CodeSource(new URL("file","",newCodeBase),null);
  }
 catch (  MalformedURLException e) {
  }
  CompilationUnit unit=new CompilationUnit(config,codeSource,getParent());
  try {
    ClassCollector collector=createCollector(unit);
    unit.addClassNode(classNode);
    unit.setClassgenCallback(collector);
    unit.compile(Phases.CLASS_GENERATION);
    return collector.generatedClass;
  }
 catch (  CompilationFailedException e) {
    throw new RuntimeException(e);
  }
}
