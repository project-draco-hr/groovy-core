{
  File targetDir=config.getTargetDirectory();
  if (targetDir != null) {
    String filename=classNode.getName().replace('.',File.separatorChar) + ".class";
    int index=filename.lastIndexOf(File.separator);
    String dirname;
    if (index != -1) {
      dirname=filename.substring(0,index);
    }
 else {
      dirname="";
    }
    File outputFile=new File(targetDir,filename);
    System.err.println("Writing: " + outputFile);
    try {
      new File(targetDir,dirname).mkdirs();
      FileOutputStream fos=new FileOutputStream(outputFile);
      fos.write(code,0,code.length);
      fos.close();
    }
 catch (    IOException ioe) {
      ioe.printStackTrace();
    }
  }
}
