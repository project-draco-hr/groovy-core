{
  if (isType(TYPE,node)) {
    node=node.getFirstChild();
  }
  Type answer=null;
  if (isType(DOT,node) || isType(OPTIONAL_DOT,node)) {
    answer=Type.makeType(qualifiedName(node));
  }
 else   if (isPrimitiveTypeLiteral(node)) {
    answer=Type.makeType(node.getText());
  }
 else   if (isType(INDEX_OP,node) || isType(ARRAY_DECLARATOR,node)) {
    AST child=node.getFirstChild();
    Type ret=resolvedName(child);
    if (ret.isArray()) {
      return ret;
    }
    return ret.makeArray();
  }
 else {
    String identifier=node.getText();
    String ret=resolveTypeName(identifier);
    if (ret != null)     answer=Type.makeType(ret);
  }
  AST nextSibling=node.getNextSibling();
  if (isType(INDEX_OP,nextSibling) || isType(ARRAY_DECLARATOR,node)) {
    return answer.makeArray();
  }
 else {
    return answer;
  }
}
