{
  List strings=new ArrayList();
  List values=new ArrayList();
  StringBuffer buffer=new StringBuffer();
  for (AST node=gstringNode.getFirstChild(); node != null; node=node.getNextSibling()) {
    int type=node.getType();
    String text=null;
switch (type) {
case STRING_LITERAL:
      text=node.getText();
    ConstantExpression constantExpression=new ConstantExpression(text);
  configureAST(constantExpression,node);
strings.add(constantExpression);
buffer.append(text);
break;
case IDENT:
text=node.getText();
VariableExpression variableExpression=new VariableExpression(text);
configureAST(variableExpression,node);
values.add(variableExpression);
buffer.append("$");
buffer.append(text);
break;
case DOT:
{
Expression expression=expression(node);
values.add(expression);
buffer.append("$");
buffer.append(expression.getText());
}
break;
case SLIST:
{
Expression valueExpression=expression(node.getFirstChild());
values.add(valueExpression);
buffer.append("${");
buffer.append(valueExpression.getText());
buffer.append("}");
}
break;
default :
unknownAST(node);
}
}
GStringExpression gStringExpression=new GStringExpression(buffer.toString(),strings,values);
configureAST(gStringExpression,gstringNode);
return gStringExpression;
}
