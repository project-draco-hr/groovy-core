{
  enumConstantBeingDef=true;
  assertNodeType(ENUM_CONSTANT_DEF,node);
  AST element=node.getFirstChild();
  if (isType(ANNOTATIONS,element)) {
    element=element.getNextSibling();
  }
  String identifier=identifier(element);
  Expression init=null;
  element=element.getNextSibling();
  if (element != null) {
    init=expression(element);
    ClassNode innerClass=getAnonymousInnerClassNode(init);
    if (innerClass != null) {
      innerClass.setSuperClass(classNode.getPlainNodeReference());
      innerClass.setModifiers(classNode.getModifiers() | Opcodes.ACC_FINAL);
      init=new ClassExpression(innerClass);
      classNode.setModifiers(classNode.getModifiers() & ~Opcodes.ACC_FINAL);
    }
 else     if (isType(ELIST,element)) {
      if (init instanceof ListExpression && !((ListExpression)init).isWrapped()) {
        ListExpression le=new ListExpression();
        le.addExpression(init);
        init=le;
      }
    }
  }
  EnumHelper.addEnumConstant(classNode,identifier,init);
  enumConstantBeingDef=false;
}
