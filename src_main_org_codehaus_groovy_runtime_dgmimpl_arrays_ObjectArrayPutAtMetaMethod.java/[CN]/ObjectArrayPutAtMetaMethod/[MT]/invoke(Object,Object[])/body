{
  final Object[] objects=(Object[])object;
  Object newValue=arguments[1];
  Class arrayComponentClass=objects.getClass().getComponentType();
  final int index=normaliseIndex(((Integer)arguments[0]).intValue(),objects.length);
  if (newValue instanceof Number) {
    if (!arrayComponentClass.equals(newValue.getClass())) {
      Object newVal=DefaultTypeTransformation.castToType(newValue,arrayComponentClass);
      objects[index]=newVal;
      return null;
    }
  }
 else   if (Character.class.isAssignableFrom(arrayComponentClass)) {
    if (newValue instanceof GString)     newValue=newValue.toString();
    if (newValue instanceof String) {
      String s=(String)newValue;
      if (s.length() != 1)       throw new IllegalArgumentException("String of length 1 expected but got a bigger one");
      objects[index]=s.charAt(0);
    }
 else {
      objects[index]=((Character)newValue).charValue();
    }
    return null;
  }
  objects[index]=arguments[1];
  return null;
}
